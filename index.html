<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Gold Trading Pro</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial"></script>
<style>
body{background:#0f172a;color:white;font-family:sans-serif;text-align:center}
input,button{padding:8px;margin:5px}
.container{max-width:900px;margin:auto}
.card{background:#1e293b;padding:15px;border-radius:10px;margin-top:15px}
</style>
</head>
<body>

<h2>üìä Gold Trading Pro System</h2>

<div class="container">

<div class="card">
<h3>üìà Live Gold Chart (XAU/USD)</h3>
<canvas id="chart" height="100"></canvas>
</div>

<div class="card">
<h3>üí∞ Risk Calculator</h3>

<label>‡∏ó‡∏∏‡∏ô ($)</label><br>
<input type="number" id="capital"><br>

<label>‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á % ‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πâ</label><br>
<input type="number" id="riskPercent"><br>

<label>Entry Price</label><br>
<input type="number" id="entry"><br>

<label>Stop Loss</label><br>
<input type="number" id="sl"><br>

<label>Take Profit</label><br>
<input type="number" id="tp"><br>

<button onclick="calculate()">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</button>

<div id="result"></div>
</div>

</div>

<script>

// ====== API KEY ‡πÉ‡∏™‡πà‡πÅ‡∏•‡πâ‡∏ß ======
const API_KEY = "aa56ae51e4014bd6a8c6e54e736d2764";

// ====== ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏≠‡∏á ======
async function loadGold(){
let res = await fetch(`https://api.twelvedata.com/time_series?symbol=XAU/USD&interval=5min&outputsize=30&apikey=${API_KEY}`);
let data = await res.json();

if(!data.values){
document.body.innerHTML += "<p>API Error ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ‡πÄ‡∏Å‡∏¥‡∏ô‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤</p>";
return;
}

let values = data.values.reverse();

let chartData = values.map(v => ({
x: new Date(v.datetime),
o: parseFloat(v.open),
h: parseFloat(v.high),
l: parseFloat(v.low),
c: parseFloat(v.close)
}));

new Chart(document.getElementById("chart"), {
type: 'candlestick',
data: {
datasets: [{
label: 'XAU/USD',
data: chartData
}]
}
});
}

loadGold();

// ====== ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Lot + Risk/Reward ======
function calculate(){
let capital = parseFloat(document.getElementById("capital").value);
let riskPercent = parseFloat(document.getElementById("riskPercent").value);
let entry = parseFloat(document.getElementById("entry").value);
let sl = parseFloat(document.getElementById("sl").value);
let tp = parseFloat(document.getElementById("tp").value);

let riskMoney = capital * (riskPercent/100);
let stopDistance = Math.abs(entry - sl);
let lot = riskMoney / stopDistance / 100;

let reward = Math.abs(tp - entry);
let rr = reward / stopDistance;

document.getElementById("result").innerHTML = `
<p>üéØ Risk Amount: $${riskMoney.toFixed(2)}</p>
<p>üì¶ Suggested Lot: ${lot.toFixed(2)}</p>
<p>üìä Risk/Reward: 1 : ${rr.toFixed(2)}</p>
`;
}
</script>

</body>
</html>
